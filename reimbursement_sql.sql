CREATE TABLE EMPLOYEE_ROLES (
EMPLOYEE_ROLEID INTEGER PRIMARY KEY,
EMPLOYEE_TITLE VARCHAR2(100)
);

INSERT INTO EMPLOYEE_ROLES
VALUES (1, 'Employee');
INSERT INTO EMPLOYEE_ROLES
VALUES (2, 'Manager');
INSERT INTO EMPLOYEE_ROLES
VALUES (3, 'Senior Manager');


create table EMPLOYEE (
	EMPLOYEEID INTEGER PRIMARY KEY,
	FIRSTNAME VARCHAR(50),
	LASTNAME VARCHAR(50),
	EMAIL VARCHAR(50),
	ROLEID INTEGER,
	EMPLOYEE_USERNAME VARCHAR(50),
	EMPLOYEE_PASSWORD VARCHAR(50)
);
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (1, 'Erv', 'Shankland', 'eshankland0@apple.com', 1, 'eshankland0', 'e4BxHSP');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (2, 'Aylmar', 'Vasilevich', 'avasilevich1@vinaora.com', 1, 'avasilevich1', 'eXZbX3147Vt');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (3, 'Barney', 'MacArdle', 'bmacardle2@mapquest.com', 1, 'bmacardle2', 'VlOV1tm');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (4, 'Gerhardine', 'Cakes', 'gcakes3@typepad.com', 1, 'gcakes3', 'fcLeDRoQM3E');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (5, 'Alexa', 'Peck', 'apeck4@cdbaby.com', 1, 'apeck4', 'JwWGknSn3K2');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (6, 'Elfrida', 'Downes', 'edownes5@myspace.com', 1, 'edownes5', 'IvQdep9M');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (7, 'Nicolina', 'Notti', 'nnotti6@purevolume.com', 1, 'nnotti6', 'WUsaoKJngP7');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (8, 'Bronnie', 'Sandhill', 'bsandhill7@nasa.gov', 1, 'bsandhill7', 'Ynlu78yehe');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (9, 'Reynold', 'Freschi', 'rfreschi8@thetimes.co.uk', 1, 'rfreschi8', '6rsHyuee');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (10, 'Geoffry', 'Stiegar', 'gstiegar9@mac.com', 2, 'gstiegar9', '5dd2y1C');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (11, 'Mariel', 'Grabham', 'mgrabhama@wordpress.org', 1, 'mgrabhama', '0ACOnjhXBBU');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (12, 'Sharia', 'Frome', 'sfromeb@army.mil', 1, 'sfromeb', 'rv0dFI');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (13, 'Crichton', 'Sheaf', 'csheafc@webs.com', 1, 'csheafc', '0tNXjIZI6');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (14, 'Cynthie', 'Bambridge', 'cbambridged@state.gov', 1, 'cbambridged', 'AfAoWGb');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (15, 'Maribel', 'Ferriman', 'mferrimane@t-online.de', 1, 'mferrimane', '7YrCFguLi2E4');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (16, 'Dulcy', 'Northgraves', 'dnorthgravesf@house.gov', 1, 'dnorthgravesf', 'iUQMiaxId5j');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (17, 'Jaquenetta', 'McEntee', 'jmcenteeg@marriott.com', 1, 'jmcenteeg', 'OCFslEdunY');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (18, 'Waylan', 'McCourt', 'wmccourth@lulu.com', 2, 'wmccourth', 'TFG4tI');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (19, 'Gardie', 'Ludlow', 'gludlowi@gizmodo.com', 1, 'gludlowi', 'RMben5');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (20, 'Melisande', 'Bernakiewicz', 'mbernakiewiczj@sphinn.com', 1, 'mbernakiewiczj', 'aWYMut5a');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (21, 'Nehemiah', 'Harvett', 'nharvettk@artisteer.com', 1, 'nharvettk', 'rwxXv2leJ3');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (22, 'Reinhold', 'Planke', 'rplankel@multiply.com', 1, 'rplankel', 'x4x0urwE3Aa');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (23, 'Zoe', 'Mandrake', 'zmandrakem@vimeo.com', 2, 'zmandrakem', '0nf6sAsTA');
insert into EMPLOYEE (EMPLOYEEID, FIRSTNAME, LASTNAME, EMAIL, ROLEID, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) values (24, 'Gae', 'Cone', 'gconen@cnbc.com', 1, 'gconen', 'AQ13WmzBsrs');

CREATE TABLE REIMBURSEMENTS (
    REIMB_ID INTEGER PRIMARY KEY,
	REIMB_AMOUNT NUMBER,
	REIMB_DESC VARCHAR(100),
	REIMB_IMAGE BLOB,
	EMPLOYEEID INTEGER,
	REIMB_STATUS INTEGER,
	REIMB_RESOLVER INTEGER
);

CREATE TABLE REIMB_STATUS (
    STATUS_ID INTEGER PRIMARY KEY,
    STATUS_TITLE VARCHAR2(100)
);

INSERT INTO REIMB_STATUS
VALUES (1, 'Pending');
INSERT INTO REIMB_STATUS
VALUES (2, 'Approved');
INSERT INTO REIMB_STATUS
VALUES (3, 'Denied');

ALTER TABLE EMPLOYEE
ADD CONSTRAINT FK_EMPLOYEE_ROLEID
FOREIGN KEY (ROLEID) REFERENCES EMPLOYEE_ROLES (EMPLOYEE_ROLEID);

ALTER TABLE REIMBURSEMENTS
ADD CONSTRAINT FK_REIMBURSEMENTS_EMPLOYEEID
FOREIGN KEY (EMPLOYEEID) REFERENCES EMPLOYEE (EMPLOYEEID);

ALTER TABLE REIMBURSEMENTS
ADD CONSTRAINT FK_REIMBURSEMENTS_REIMB_STATUS
FOREIGN KEY (REIMB_STATUS) REFERENCES REIMB_STATUS (STATUS_ID);

ALTER TABLE REIMBURSEMENTS
ADD CONSTRAINT FK_REIMBURSEMENTS_RESOLVER
FOREIGN KEY (REIMB_RESOLVER) REFERENCES EMPLOYEE (EMPLOYEEID);

CREATE SEQUENCE SQ_REIMBURSEMENTS_PK
START WITH 1
INCREMENT BY 1;
/


CREATE OR REPLACE TRIGGER TR_INSERT_REIMBURSEMENT
BEFORE INSERT ON REIMBURSEMENTS --SPECIFY WHICH DML OPERATION, BEFORE/AFTER, AND WHICH TABLE
FOR EACH ROW
BEGIN
    SELECT SQ_REIMBURSEMENTS_PK.NEXTVAL INTO :NEW.REIMB_ID FROM DUAL;
END;
/

COMMIT;

SELECT E.EMPLOYEEID, E.FIRSTNAME, E.LASTNAME, E.EMAIL, E.ROLEID, ER.EMPLOYEE_TITLE FROM EMPLOYEE E 
					INNER JOIN EMPLOYEE_ROLES ER 
					ON E.ROLEID = ER.EMPLOYEE_ROLEID
                    ORDER BY EMPLOYEEID;
                    
SELECT R.REIMB_ID, R.REIMB_AMOUNT, R.REIMB_DESC, R.EMPLOYEEID, E.FIRSTNAME, E.LASTNAME, R.REIMB_STATUS, S.STATUS_TITLE, R.REIMB_RESOLVER
						FROM REIMBURSEMENTS R INNER JOIN EMPLOYEE E ON R.EMPLOYEEID = E.EMPLOYEEID
						INNER JOIN REIMB_STATUS S ON R.REIMB_STATUS = S.STATUS_ID ORDER BY R.REIMB_ID;
                        
SELECT * FROM REIMBURSEMENTS;

DELETE FROM REIMBURSEMENTS WHERE REIMB_ID = 1;
/

